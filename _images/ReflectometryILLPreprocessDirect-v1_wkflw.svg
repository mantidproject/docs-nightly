<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.1.0 (20250701.1702)
 -->
<!-- Title: ReflectometryILLPreprocess Pages: 1 -->
<svg width="392pt" height="931pt"
 viewBox="0.00 0.00 392.00 931.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 926.75)">
<title>ReflectometryILLPreprocess</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-926.75 388.25,-926.75 388.25,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="192.12" y="-905.45" font-family="Helvetica,sans-Serif" font-size="14.00">Direct Beam Preprocessing</text>
<!-- run -->
<g id="node1" class="node">
<title>run</title>
<ellipse fill="khaki" stroke="black" cx="62.75" cy="-879.5" rx="30.16" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="62.75" y="-874.83" font-family="Helvetica,sans-Serif" font-size="14.00">Run</text>
</g>
<!-- load -->
<g id="node7" class="node">
<title>load</title>
<path fill="lightskyblue" stroke="black" d="M110.5,-824.5C110.5,-824.5 15,-824.5 15,-824.5 9,-824.5 3,-818.5 3,-812.5 3,-812.5 3,-800.5 3,-800.5 3,-794.5 9,-788.5 15,-788.5 15,-788.5 110.5,-788.5 110.5,-788.5 116.5,-788.5 122.5,-794.5 122.5,-800.5 122.5,-800.5 122.5,-812.5 122.5,-812.5 122.5,-818.5 116.5,-824.5 110.5,-824.5"/>
<text xml:space="preserve" text-anchor="middle" x="62.75" y="-801.83" font-family="Helvetica,sans-Serif" font-size="14.00">LoadAndMerge</text>
</g>
<!-- run&#45;&gt;load -->
<g id="edge1" class="edge">
<title>run&#45;&gt;load</title>
<path fill="none" stroke="black" d="M62.75,-861.31C62.75,-853.73 62.75,-844.6 62.75,-836.04"/>
<polygon fill="black" stroke="black" points="66.25,-836.04 62.75,-826.04 59.25,-836.04 66.25,-836.04"/>
</g>
<!-- output -->
<g id="node2" class="node">
<title>output</title>
<ellipse fill="khaki" stroke="black" cx="180.75" cy="-18" rx="98.56" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-13.32" font-family="Helvetica,sans-Serif" font-size="14.00">OutputWorkspace</text>
</g>
<!-- waterReference -->
<g id="node3" class="node">
<title>waterReference</title>
<ellipse fill="khaki" stroke="black" cx="236.75" cy="-733.5" rx="92.77" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="236.75" y="-728.83" font-family="Helvetica,sans-Serif" font-size="14.00">WaterWorkspace</text>
</g>
<!-- waterNorm -->
<g id="node8" class="node">
<title>waterNorm</title>
<path fill="lightskyblue" stroke="black" d="M200.12,-662.25C200.12,-662.25 99.38,-662.25 99.38,-662.25 93.38,-662.25 87.38,-656.25 87.38,-650.25 87.38,-650.25 87.38,-631.75 87.38,-631.75 87.38,-625.75 93.38,-619.75 99.38,-619.75 99.38,-619.75 200.12,-619.75 200.12,-619.75 206.12,-619.75 212.12,-625.75 212.12,-631.75 212.12,-631.75 212.12,-650.25 212.12,-650.25 212.12,-656.25 206.12,-662.25 200.12,-662.25"/>
<text xml:space="preserve" text-anchor="middle" x="149.75" y="-644.95" font-family="Helvetica,sans-Serif" font-size="14.00">Divide by</text>
<text xml:space="preserve" text-anchor="middle" x="149.75" y="-627.7" font-family="Helvetica,sans-Serif" font-size="14.00">water reference</text>
</g>
<!-- waterReference&#45;&gt;waterNorm -->
<g id="edge4" class="edge">
<title>waterReference&#45;&gt;waterNorm</title>
<path fill="none" stroke="black" d="M220.39,-715.48C208.18,-702.78 191.22,-685.13 176.98,-670.32"/>
<polygon fill="black" stroke="black" points="179.89,-668.31 170.44,-663.52 174.85,-673.16 179.89,-668.31"/>
<text xml:space="preserve" text-anchor="middle" x="220.54" y="-684.2" font-family="Helvetica,sans-Serif" font-size="14.00">Rebin</text>
</g>
<!-- toWavelength -->
<g id="node4" class="node">
<title>toWavelength</title>
<path fill="lightskyblue" stroke="black" d="M238.62,-261.5C238.62,-261.5 122.88,-261.5 122.88,-261.5 116.88,-261.5 110.88,-255.5 110.88,-249.5 110.88,-249.5 110.88,-231 110.88,-231 110.88,-225 116.88,-219 122.88,-219 122.88,-219 238.62,-219 238.62,-219 244.62,-219 250.62,-225 250.62,-231 250.62,-231 250.62,-249.5 250.62,-249.5 250.62,-255.5 244.62,-261.5 238.62,-261.5"/>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-244.2" font-family="Helvetica,sans-Serif" font-size="14.00">Convert from TOF</text>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-226.95" font-family="Helvetica,sans-Serif" font-size="14.00"> to wavelength</text>
</g>
<!-- correctGravity -->
<g id="node13" class="node">
<title>correctGravity</title>
<polygon fill="limegreen" stroke="black" points="180.75,-182 31.7,-164 180.75,-146 329.8,-164 180.75,-182"/>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-159.32" font-family="Helvetica,sans-Serif" font-size="14.00">Correct for gravity?</text>
</g>
<!-- toWavelength&#45;&gt;correctGravity -->
<g id="edge11" class="edge">
<title>toWavelength&#45;&gt;correctGravity</title>
<path fill="none" stroke="black" d="M180.75,-218.57C180.75,-210.75 180.75,-201.72 180.75,-193.32"/>
<polygon fill="black" stroke="black" points="184.25,-193.58 180.75,-183.58 177.25,-193.58 184.25,-193.58"/>
</g>
<!-- extractMonitors -->
<g id="node5" class="node">
<title>extractMonitors</title>
<path fill="lightskyblue" stroke="black" d="M113.5,-751.5C113.5,-751.5 12,-751.5 12,-751.5 6,-751.5 0,-745.5 0,-739.5 0,-739.5 0,-727.5 0,-727.5 0,-721.5 6,-715.5 12,-715.5 12,-715.5 113.5,-715.5 113.5,-715.5 119.5,-715.5 125.5,-721.5 125.5,-727.5 125.5,-727.5 125.5,-739.5 125.5,-739.5 125.5,-745.5 119.5,-751.5 113.5,-751.5"/>
<text xml:space="preserve" text-anchor="middle" x="62.75" y="-728.83" font-family="Helvetica,sans-Serif" font-size="14.00">ExtractMonitors</text>
</g>
<!-- extractMonitors&#45;&gt;waterNorm -->
<g id="edge3" class="edge">
<title>extractMonitors&#45;&gt;waterNorm</title>
<path fill="none" stroke="black" d="M79.52,-715.05C91.58,-702.51 108.1,-685.33 122.09,-670.77"/>
<polygon fill="black" stroke="black" points="124.53,-673.29 128.93,-663.66 119.48,-668.44 124.53,-673.29"/>
</g>
<!-- fluxNorm -->
<g id="node6" class="node">
<title>fluxNorm</title>
<path fill="lightskyblue" stroke="black" d="M243.12,-414C243.12,-414 118.38,-414 118.38,-414 112.38,-414 106.38,-408 106.38,-402 106.38,-402 106.38,-383.5 106.38,-383.5 106.38,-377.5 112.38,-371.5 118.38,-371.5 118.38,-371.5 243.12,-371.5 243.12,-371.5 249.12,-371.5 255.12,-377.5 255.12,-383.5 255.12,-383.5 255.12,-402 255.12,-402 255.12,-408 249.12,-414 243.12,-414"/>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-396.7" font-family="Helvetica,sans-Serif" font-size="14.00">Divide by duration/</text>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-379.45" font-family="Helvetica,sans-Serif" font-size="14.00">monitor counts</text>
</g>
<!-- subtractBkg -->
<g id="node10" class="node">
<title>subtractBkg</title>
<path fill="lightskyblue" stroke="black" d="M249.88,-334.5C249.88,-334.5 111.62,-334.5 111.62,-334.5 105.62,-334.5 99.62,-328.5 99.62,-322.5 99.62,-322.5 99.62,-310.5 99.62,-310.5 99.62,-304.5 105.62,-298.5 111.62,-298.5 111.62,-298.5 249.88,-298.5 249.88,-298.5 255.88,-298.5 261.88,-304.5 261.88,-310.5 261.88,-310.5 261.88,-322.5 261.88,-322.5 261.88,-328.5 255.88,-334.5 249.88,-334.5"/>
<text xml:space="preserve" text-anchor="middle" x="180.75" y="-311.82" font-family="Helvetica,sans-Serif" font-size="14.00">Subtract background</text>
</g>
<!-- fluxNorm&#45;&gt;subtractBkg -->
<g id="edge9" class="edge">
<title>fluxNorm&#45;&gt;subtractBkg</title>
<path fill="none" stroke="black" d="M180.75,-371.07C180.75,-363.25 180.75,-354.22 180.75,-345.82"/>
<polygon fill="black" stroke="black" points="184.25,-346.08 180.75,-336.08 177.25,-346.08 184.25,-346.08"/>
</g>
<!-- load&#45;&gt;extractMonitors -->
<g id="edge2" class="edge">
<title>load&#45;&gt;extractMonitors</title>
<path fill="none" stroke="black" d="M62.75,-788.31C62.75,-780.73 62.75,-771.6 62.75,-763.04"/>
<polygon fill="black" stroke="black" points="66.25,-763.04 62.75,-753.04 59.25,-763.04 66.25,-763.04"/>
</g>
<!-- isSlitNorm -->
<g id="node12" class="node">
<title>isSlitNorm</title>
<polygon fill="limegreen" stroke="black" points="149.75,-582.75 10.37,-564.75 149.75,-546.75 289.13,-564.75 149.75,-582.75"/>
<text xml:space="preserve" text-anchor="middle" x="149.75" y="-560.08" font-family="Helvetica,sans-Serif" font-size="14.00">SlitNormalisation?</text>
</g>
<!-- waterNorm&#45;&gt;isSlitNorm -->
<g id="edge5" class="edge">
<title>waterNorm&#45;&gt;isSlitNorm</title>
<path fill="none" stroke="black" d="M149.75,-619.32C149.75,-611.5 149.75,-602.47 149.75,-594.07"/>
<polygon fill="black" stroke="black" points="153.25,-594.33 149.75,-584.33 146.25,-594.33 153.25,-594.33"/>
</g>
<!-- slitNorm -->
<g id="node9" class="node">
<title>slitNorm</title>
<path fill="lightskyblue" stroke="black" d="M153.5,-493.5C153.5,-493.5 46,-493.5 46,-493.5 40,-493.5 34,-487.5 34,-481.5 34,-481.5 34,-463 34,-463 34,-457 40,-451 46,-451 46,-451 153.5,-451 153.5,-451 159.5,-451 165.5,-457 165.5,-463 165.5,-463 165.5,-481.5 165.5,-481.5 165.5,-487.5 159.5,-493.5 153.5,-493.5"/>
<text xml:space="preserve" text-anchor="middle" x="99.75" y="-476.2" font-family="Helvetica,sans-Serif" font-size="14.00">Divide by</text>
<text xml:space="preserve" text-anchor="middle" x="99.75" y="-458.95" font-family="Helvetica,sans-Serif" font-size="14.00">slit opening area</text>
</g>
<!-- slitNorm&#45;&gt;fluxNorm -->
<g id="edge8" class="edge">
<title>slitNorm&#45;&gt;fluxNorm</title>
<path fill="none" stroke="black" d="M121.03,-450.89C130.26,-442.06 141.22,-431.57 151.22,-422.01"/>
<polygon fill="black" stroke="black" points="153.43,-424.73 158.24,-415.29 148.59,-419.68 153.43,-424.73"/>
</g>
<!-- subtractBkg&#45;&gt;toWavelength -->
<g id="edge10" class="edge">
<title>subtractBkg&#45;&gt;toWavelength</title>
<path fill="none" stroke="black" d="M180.75,-298.28C180.75,-290.8 180.75,-281.79 180.75,-273.16"/>
<polygon fill="black" stroke="black" points="184.25,-273.32 180.75,-263.32 177.25,-273.32 184.25,-273.32"/>
</g>
<!-- gravityCorrection -->
<g id="node11" class="node">
<title>gravityCorrection</title>
<path fill="lightskyblue" stroke="black" d="M372.25,-109C372.25,-109 209.25,-109 209.25,-109 203.25,-109 197.25,-103 197.25,-97 197.25,-97 197.25,-85 197.25,-85 197.25,-79 203.25,-73 209.25,-73 209.25,-73 372.25,-73 372.25,-73 378.25,-73 384.25,-79 384.25,-85 384.25,-85 384.25,-97 384.25,-97 384.25,-103 378.25,-109 372.25,-109"/>
<text xml:space="preserve" text-anchor="middle" x="290.75" y="-86.33" font-family="Helvetica,sans-Serif" font-size="14.00">Gravity correction step 1</text>
</g>
<!-- gravityCorrection&#45;&gt;output -->
<g id="edge14" class="edge">
<title>gravityCorrection&#45;&gt;output</title>
<path fill="none" stroke="black" d="M263.84,-72.63C249.41,-63.32 231.45,-51.72 215.92,-41.7"/>
<polygon fill="black" stroke="black" points="218.2,-39 207.9,-36.52 214.4,-44.88 218.2,-39"/>
</g>
<!-- isSlitNorm&#45;&gt;fluxNorm -->
<g id="edge7" class="edge">
<title>isSlitNorm&#45;&gt;fluxNorm</title>
<path fill="none" stroke="black" d="M190.6,-551.55C201.28,-546.31 211.53,-538.95 217.75,-528.75 237.67,-496.09 219.1,-452.54 201.84,-423.85"/>
<polygon fill="black" stroke="black" points="204.96,-422.23 196.66,-415.64 199.04,-425.97 204.96,-422.23"/>
<text xml:space="preserve" text-anchor="middle" x="303.14" y="-467.57" font-family="Helvetica,sans-Serif" font-size="14.00">Slit Normalisation OFF</text>
</g>
<!-- isSlitNorm&#45;&gt;slitNorm -->
<g id="edge6" class="edge">
<title>isSlitNorm&#45;&gt;slitNorm</title>
<path fill="none" stroke="black" d="M101.19,-552.71C88.97,-547.51 77.28,-539.89 70,-528.75 64.7,-520.64 66.64,-511.49 71.44,-502.99"/>
<polygon fill="black" stroke="black" points="74.15,-505.23 76.97,-495.01 68.4,-501.24 74.15,-505.23"/>
<text xml:space="preserve" text-anchor="middle" x="143.88" y="-515.45" font-family="Helvetica,sans-Serif" font-size="14.00">Slit Normalisation ON</text>
</g>
<!-- correctGravity&#45;&gt;output -->
<g id="edge12" class="edge">
<title>correctGravity&#45;&gt;output</title>
<path fill="none" stroke="black" d="M180.75,-145.63C180.75,-121.3 180.75,-76.8 180.75,-47.56"/>
<polygon fill="black" stroke="black" points="184.25,-47.94 180.75,-37.94 177.25,-47.94 184.25,-47.94"/>
</g>
<!-- correctGravity&#45;&gt;gravityCorrection -->
<g id="edge13" class="edge">
<title>correctGravity&#45;&gt;gravityCorrection</title>
<path fill="none" stroke="black" d="M203.54,-148.29C218.17,-138.85 237.48,-126.38 254.22,-115.58"/>
<polygon fill="black" stroke="black" points="255.94,-118.63 262.44,-110.27 252.14,-112.75 255.94,-118.63"/>
</g>
</g>
</svg>
